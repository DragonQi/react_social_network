(this.webpackJsonpreact_social_network=this.webpackJsonpreact_social_network||[]).push([[0],{18:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__2ie_8",dialogsItems:"Dialogs_dialogsItems__2CQvK",active:"Dialogs_active__pVlqd",messages:"Dialogs_messages__n_OO4"}},30:function(e,t,n){e.exports={postsBlock:"MyPosts_postsBlock__YeZ0W",posts:"MyPosts_posts__debLW"}},31:function(e,t,n){e.exports={item:"Post_item__2K0n-",post:"Post_post__ANjV_"}},32:function(e,t,n){e.exports={userPhoto:"Users_userPhoto__1S-4o",selectedPage:"Users_selectedPage__3WZai"}},33:function(e,t,n){e.exports={header:"Header_header__13iaP",loginBlock:"Header_loginBlock__398aW"}},46:function(e,t,n){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__1sWGE"}},47:function(e,t,n){e.exports={item:"Preloader_item__3DV_M"}},50:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){e.exports={sidebar:"Sidebar_sidebar__2xUM7",friends:"Sidebar_friends__JNgY6",friend:"Sidebar_friend__23czv"}},79:function(e,t,n){e.exports={item:"Profile_item__2guuS"}},8:function(e,t,n){e.exports={nav:"Navbar_nav__1TuAP",item:"Navbar_item__1nzeG",activeLink:"Navbar_activeLink__3he3b"}},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var s=n(0),r=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,84)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),s(e),r(e),i(e),a(e)}))},i=(n(50),n(9)),a=n(20),c=n(3),o=n(43),u=n.n(o).a.create({withCredentials:!0,headers:{"API-KEY":"6a1315c1-3a31-49c8-b775-90135b06c639"},baseURL:"https://social-network.samuraijs.com/api/1.0/"}),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return u.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},d=function(e){return u.post("follow/".concat(e)).then((function(e){return e.data}))},j=function(e){return u.delete("follow/".concat(e)).then((function(e){return e.data}))},b=function(e){return u.get("profile/"+e).then((function(e){return e.data}))},h=function(e){return u.get("profile/status/"+e).then((function(e){return e.data}))},p=function(e){return u.put("profile/status/",{status:e})},f=function(){return u.get("auth/me").then((function(e){return e.data}))},O=function(e,t,n){return u.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},g="ADD_POST",m="UPDATE_NEW_POST_TEXT",x="SET_USER_PROFILE",v="SET_STATUS",_={posts:[{id:1,message:"TextMessage1",likesCount:12},{id:2,message:"TextMessage2",likesCount:11},{id:3,message:"TextMessage3",likesCount:15},{id:4,message:"TextMessage4",likesCount:13}],newPostText:"",profile:null,status:""},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:var n={id:5,message:e.newPostText,likesCount:0};return Object(c.a)(Object(c.a)({},e),{},{posts:[].concat(Object(a.a)(e.posts),[n]),newPostText:""});case m:return Object(c.a)(Object(c.a)({},e),{},{newPostText:t.newText});case x:return Object(c.a)(Object(c.a)({},e),{},{profile:t.profile});case v:return Object(c.a)(Object(c.a)({},e),{},{status:t.status});default:return e}},w=function(e){return{type:x,profile:e}},S=function(e){return{type:v,status:e}},k="UPDATE_NEW_MESSAGE_BODY",C="SEND_MESSAGE",N={dialogs:[{id:1,name:"Name1"},{id:2,name:"Name2"},{id:3,name:"Name3"},{id:4,name:"Name4"},{id:5,name:"Name5"},{id:6,name:"Name6"}],messages:[{id:1,message:"1"},{id:2,message:"2"},{id:3,message:"3"},{id:4,message:"4"},{id:5,message:"5"},{id:6,message:"6"}],newMessageBody:""},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(c.a)(Object(c.a)({},e),{},{newMessageBody:t.body});case C:var n=e.newMessageBody;return Object(c.a)(Object(c.a)({},e),{},{newMessageBody:"",messages:[].concat(Object(a.a)(e.messages),[{id:7,message:n}])});default:return e}},y={},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return e},U="FOLLOW",E="UNFOLLOW",I="SET_USERS",A="SET_CURRENT_PAGE",L="SET_TOTAL_USERS_COUNT",F="TOGGLE_IS_FETCHING",B="TOGGLE_IS_FOLLOWING_PROGRESS",D={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(c.a)(Object(c.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(c.a)(Object(c.a)({},e),{},{followed:!0}):e}))});case E:return Object(c.a)(Object(c.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(c.a)(Object(c.a)({},e),{},{followed:!1}):e}))});case I:return Object(c.a)(Object(c.a)({},e),{},{users:t.users});case A:return Object(c.a)(Object(c.a)({},e),{},{currentPage:t.currentPage});case L:return Object(c.a)(Object(c.a)({},e),{},{totalUsersCount:t.countNumber});case F:return Object(c.a)(Object(c.a)({},e),{},{isFetching:t.isFetching});case B:return Object(c.a)(Object(c.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(a.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},R=function(e){return{type:F,isFetching:e}},z=function(e,t){return{type:B,isFetching:e,userId:t}},W="SET_AUTH_USER_DATA",H={userId:null,email:null,login:null,isFetching:!1,isAuth:!1},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return Object(c.a)(Object(c.a)(Object(c.a)({},e),t.payload),{},{isAuth:!0});default:return e}},J=function(e,t,n,s){return{type:W,payload:{userId:e,email:t,login:n,isAuth:s}}},K=function(){return function(e){f().then((function(t){if(0===t.resultCode){var n=t.data,s=n.id,r=n.email,i=n.login;e(J(s,r,i,!0))}}))}},V=n(44),Z=Object(i.c)({profilePage:P,dialogsPage:T,sidebar:M,usersPage:G,auth:Y}),q=Object(i.e)(Z,Object(i.a)(V.a));window.store=q;var Q=q,X=n(1),$=n.n(X),ee=n(23),te=n.n(ee),ne=(n(73),n(8)),se=n.n(ne),re=n(6),ie=(n(74),function(e){return Object(s.jsx)("div",{})}),ae=function(e){return Object(s.jsxs)("nav",{className:se.a.nav,children:[Object(s.jsx)("div",{className:se.a.item,children:Object(s.jsx)(re.b,{to:"/profile",activeClassName:se.a.activeLink,children:"Profile"})}),Object(s.jsx)("div",{className:"".concat(se.a.item," ").concat(se.a.active),children:Object(s.jsx)(re.b,{to:"/dialogs",activeClassName:se.a.activeLink,children:"Message"})}),Object(s.jsx)("div",{className:se.a.item,children:Object(s.jsx)(re.b,{to:"/users",activeClassName:se.a.activeLink,children:"Users"})}),Object(s.jsx)("div",{className:se.a.item,children:Object(s.jsx)(re.b,{to:"/news",activeClassName:se.a.activeLink,children:"News"})}),Object(s.jsx)("div",{className:se.a.item,children:Object(s.jsx)(re.b,{to:"/music",activeClassName:se.a.activeLink,children:"Music"})}),Object(s.jsx)("div",{className:se.a.item,children:Object(s.jsx)(re.b,{to:"/settings",activeClassName:se.a.activeLink,children:"Settings"})}),Object(s.jsx)(ie,{})]})},ce=n(14),oe=n(15),ue=n(17),le=n(16),de=(n(79),n(46)),je=n.n(de),be=n(30),he=n.n(be),pe=n(31),fe=n.n(pe),Oe=function(e){return Object(s.jsx)("div",{className:fe.a.post,children:Object(s.jsxs)("div",{className:fe.a.item,children:[Object(s.jsx)("img",{src:"https://www.meme-arsenal.com/memes/6e04ae9a90c6874a681e2c5d8cb5d046.jpg"}),e.message,Object(s.jsx)("div",{children:Object(s.jsxs)("span",{children:["like ",e.likesCount]})})]})})},ge=function(e){var t=e.posts.map((function(e){return Object(s.jsx)(Oe,{message:e.message,likesCount:e.likesCount})})),n=$.a.createRef();return Object(s.jsxs)("div",{className:he.a.postsBlock,children:[Object(s.jsx)("h3",{children:"my post"}),Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{children:Object(s.jsx)("textarea",{onChange:function(){var t=n.current.value;e.updateNewPostText(t)},ref:n,value:e.newPostText})}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{onClick:function(){e.addPost()},children:"Add Post"})})]}),Object(s.jsx)("div",{className:he.a.posts,children:t})]})},me=n(47),xe=n.n(me),ve=function(){return Object(s.jsxs)("div",{className:xe.a.item,children:[Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{})]})},_e=function(e){Object(ue.a)(n,e);var t=Object(le.a)(n);function n(){var e;Object(ce.a)(this,n);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={editMode:!1,status:e.props.status},e.activateEditMode=function(){e.setState({editMode:!0})},e.deactivateEditMode=function(){e.setState({editMode:!1}),e.props.updateUserStatus(e.state.status)},e.onStatusChange=function(t){e.setState({status:t.currentTarget.value})},e}return Object(oe.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return Object(s.jsxs)(s.Fragment,{children:[!this.state.editMode&&Object(s.jsx)("div",{children:Object(s.jsx)("span",{onDoubleClick:this.activateEditMode,children:this.props.status||"-------"})}),this.state.editMode&&Object(s.jsx)("div",{children:Object(s.jsx)("input",{onChange:this.onStatusChange,onBlur:this.deactivateEditMode,value:this.state.status})})]})}}]),n}($.a.Component),Pe=function(e){return e.profile?Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:je.a.descriptionBlock,children:[Object(s.jsx)("img",{src:e.profile.photos.large}),Object(s.jsx)(_e,{status:e.status,updateUserStatus:e.updateUserStatus})]})}):Object(s.jsx)(ve,{})},we=n(7),Se=Object(we.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{updateNewPostText:function(t){var n=function(e){return{type:m,newText:e}}(t);e(n)},addPost:function(){e({type:g})}}}))(ge),ke=function(e){return Object(s.jsxs)("div",{children:[Object(s.jsx)(Pe,{profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus}),Object(s.jsx)(Se,{store:e.store})]})},Ce=n(4),Ne=function(e){return{isAuth:e.auth.isAuth}},Te=function(e){var t=function(t){Object(ue.a)(r,t);var n=Object(le.a)(r);function r(){return Object(ce.a)(this,r),n.apply(this,arguments)}return Object(oe.a)(r,[{key:"render",value:function(){return this.props.isAuth?Object(s.jsx)(e,Object(c.a)({},this.props)):Object(s.jsx)(Ce.a,{to:"/login"})}}]),r}($.a.Component);return Object(we.b)(Ne)(t)},ye=function(e){Object(ue.a)(n,e);var t=Object(le.a)(n);function n(){return Object(ce.a)(this,n),t.apply(this,arguments)}return Object(oe.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e="15131"),this.props.getProfileThunk(e),this.props.getUserStatusThunk(e)}},{key:"render",value:function(){return Object(s.jsx)(ke,Object(c.a)(Object(c.a)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatusThunk}))}}]),n}($.a.Component),Me=Object(i.d)(Object(we.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status}}),{setUserProfile:w,getProfileThunk:function(e){return function(t){b(e).then((function(e){t(w(e))}))}},getUserStatusThunk:function(e){return function(t){h(e).then((function(e){t(S(e))}))}},updateUserStatusThunk:function(e){return function(t){p(e).then((function(n){0===n.data.resultCode&&t(S(e))}))}}}),Ce.f,Te)(ye),Ue=(n(80),function(e){return Object(s.jsx)("div",{children:"Music"})}),Ee=(n(81),function(e){return Object(s.jsx)("div",{children:"News"})}),Ie=(n(82),function(e){return Object(s.jsx)("div",{children:"Settings"})}),Ae=n(18),Le=n.n(Ae),Fe=function(e){var t="/dialogs/"+e.id;return Object(s.jsx)("div",{className:Le.a.dialog+" "+Le.a.active,children:Object(s.jsx)(re.b,{to:t,children:e.name})})},Be=function(e){return Object(s.jsx)("div",{className:Le.a.dialog,children:e.message})},De=function(e){var t=e.dialogsPage,n=t.dialogs.map((function(e){return Object(s.jsx)(Fe,{name:e.name,id:e.id},e.id)})),r=t.messages.map((function(e){return Object(s.jsx)(Be,{message:e.message},e.id)})),i=t.newMessageBody;return e.isAuth?Object(s.jsxs)("div",{className:Le.a.dialogs,children:[Object(s.jsx)("div",{className:Le.a.dialogsItems,children:n}),Object(s.jsxs)("div",{className:Le.a.messages,children:[Object(s.jsx)("div",{children:r}),Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{children:Object(s.jsx)("textarea",{placeholder:"Enter your message",value:i,onChange:function(t){var n=t.target.value;e.updateNewMessageBodyCreator(n)}})}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{onClick:function(){e.sendMessage()},children:"Send"})})]})]})]}):Object(s.jsx)(Ce.a,{to:"/login"})},Ge=Object(i.d)(Object(we.b)((function(e){return{dialogsPage:e.dialogsPage}}),(function(e){return{updateNewMessageBodyCreator:function(t){e({type:k,body:t})},sendMessage:function(){e({type:C})}}})),Te)(De),Re=n(32),ze=n.n(Re),We=n.p+"static/media/user.9556128f.png",He=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),n=[],r=1;r<=t;r++)n.push(r);return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{children:n.map((function(t){return Object(s.jsx)("span",{className:e.currentPage===t&&ze.a.selectedPage,onClick:function(n){e.onPageChanged(t)},children:t})}))}),e.users.map((function(t){return Object(s.jsxs)("div",{children:[Object(s.jsxs)("span",{children:[Object(s.jsx)("div",{children:Object(s.jsx)(re.b,{to:"/profile/"+t.id,children:Object(s.jsx)("img",{src:null!=t.photos.small?t.photos.small:We,className:ze.a.userPhoto})})}),Object(s.jsx)("div",{children:t.followed?Object(s.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.unfollow(t.id)},children:"Unfollow"}):Object(s.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.follow(t.id)},children:"Follow"})})]}),Object(s.jsxs)("span",{children:[Object(s.jsxs)("span",{children:[Object(s.jsx)("div",{children:t.name}),Object(s.jsx)("div",{children:t.status})]}),Object(s.jsxs)("span",{children:[Object(s.jsx)("div",{children:"u.location.country"}),Object(s.jsx)("div",{children:"u.location.city"})]})]})]},t.id)}))]})},Ye=function(e){Object(ue.a)(n,e);var t=Object(le.a)(n);function n(){var e;Object(ce.a)(this,n);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.getUsersThunk(t,e.props.pageSize)},e}return Object(oe.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsersThunk(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(s.jsxs)(s.Fragment,{children:[this.props.isFetching?Object(s.jsx)(ve,{}):null,Object(s.jsx)(He,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.followThunk,unfollow:this.props.unfollowThunk,followingInProgress:this.props.followingInProgress})]})}}]),n}($.a.Component),Je=Object(i.d)(Object(we.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:100,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),{setCurrentPage:function(e){return{type:A,currentPage:e}},getUsersThunk:function(e,t){return function(n){n(R(!0)),l(e,t).then((function(e){var t,s;n((t=e.items,{type:I,users:t})),n((s=e.totalCount,{type:L,countNumber:s})),n(R(!1))}))}},followThunk:function(e){return function(t){t(z(!0,e)),d(e).then((function(n){0===n.resultCode&&t(function(e){return{type:U,userId:e}}(e)),t(z(!1,e))}))}},unfollowThunk:function(e){return function(t){t(z(!0,e)),j(e).then((function(n){0===n.resultCode&&t(function(e){return{type:E,userId:e}}(e)),t(z(!1,e))}))}}}),Te)(Ye),Ke=n(33),Ve=n.n(Ke),Ze=function(e){return Object(s.jsxs)("header",{className:Ve.a.header,children:[Object(s.jsx)("img",{src:"https://cdn.dribbble.com/users/182238/screenshots/2383317/lion2.jpg"}),Object(s.jsx)("div",{className:Ve.a.loginBlock,children:e.isAuth?e.login:Object(s.jsx)(re.b,{to:"/login",children:"Login"})})]})},qe=function(e){Object(ue.a)(n,e);var t=Object(le.a)(n);function n(){return Object(ce.a)(this,n),t.apply(this,arguments)}return Object(oe.a)(n,[{key:"componentDidMount",value:function(){this.props.getAuthMeThunk()}},{key:"render",value:function(){return Object(s.jsx)(Ze,Object(c.a)({},this.props))}}]),n}($.a.Component),Qe=Object(we.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{setAuthUserData:J,getAuthMeThunk:K})(qe),Xe=n(22),$e=function(e){return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(Xe.b,{onSubmit:e.onSubmit,render:function(e){var t=e.handleSubmit;e.values;return Object(s.jsxs)("form",{onSubmit:t,children:[Object(s.jsx)("h2",{children:"Login Here"}),Object(s.jsx)("div",{children:Object(s.jsx)(Xe.a,{type:"text",name:"email",component:"input",placeholder:"Login"})}),Object(s.jsx)("div",{children:Object(s.jsx)(Xe.a,{type:"password",name:"password",component:"input",placeholder:"Password"})}),Object(s.jsxs)("div",{children:[Object(s.jsx)(Xe.a,{type:"checkbox",name:"rememberMe",component:"input"})," remember me"]}),Object(s.jsx)("button",{type:"submit",children:"Submit"})]})}})})},et=function(e){!function(e){O(e.email,e.password,e.rememberMe).then((function(e){0===e.resultCode&&K()}))}(e)},tt=Object(i.d)(Object(we.b)((function(e){return{onSubmit:et}}),{}))($e),nt=function(e){return Object(s.jsx)(re.a,{children:Object(s.jsxs)("div",{className:"app-wrapper",children:[Object(s.jsx)(Qe,{}),Object(s.jsx)(ae,{state:e.state}),Object(s.jsxs)("div",{className:"app-wrapper-content",children:[Object(s.jsx)(Ce.b,{path:"/dialogs",render:function(){return Object(s.jsx)(Ge,{store:e.store})}}),Object(s.jsx)(Ce.b,{path:"/profile/:userId?",render:function(){return Object(s.jsx)(Me,{store:e.store})}}),Object(s.jsx)(Ce.b,{path:"/users",render:function(){return Object(s.jsx)(Je,{})}}),Object(s.jsx)(Ce.b,{path:"/news",render:function(){return Object(s.jsx)(Ee,{})}}),Object(s.jsx)(Ce.b,{path:"/music",render:function(){return Object(s.jsx)(Ue,{})}}),Object(s.jsx)(Ce.b,{path:"/settings",render:function(){return Object(s.jsx)(Ie,{})}}),Object(s.jsx)(Ce.b,{path:"/login",render:function(){return Object(s.jsx)(tt,{})}})]})]})})};te.a.render(Object(s.jsx)(re.a,{children:Object(s.jsx)(we.a,{store:Q,children:Object(s.jsx)(nt,{})})}),document.getElementById("root")),r()}},[[83,1,2]]]);
//# sourceMappingURL=main.da6309e9.chunk.js.map